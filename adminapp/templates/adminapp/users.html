{% extends 'adminapp/base.html' %}
{% load static %}
{% block content %}
    <div class="users_list">
        <button class="new_user">
            <a href={% url 'admin:user_create' %}>новый пользователь</a>
        </button>
        <table>
            <tr>
                <th>Имя</th>
                <th>Аватар</th>
                <th>Редактирование</th>
                <th>Деактивировать</th>
            </tr>
            {% for object in objects %}
                    <tr class="user_record" {% if not object.is_active %} style="background-color:grey" {% endif %}>
                        <td> {{object.username}}</td>
                        <td><img
                            src="/media/{{ object.avatar|default:'users_avatars/default.jpg' }}"
                            width="64" height="64"
                            alt="Нет картинки"></td>
                        <td>
                            <a href={% url 'admin:user_update' object.pk %}>Редактировать</a>
                        </td>
                        {% if object.is_active %} 
                            <td> <a href={% url 'admin:user_deactivate' object.pk %}>Деактивировать</a> </td>
                        {% else %}
                            <td> <a href={% url 'admin:user_activate' object.pk %}>Активировать</a> </td>
                        {% endif %}
                    </tr>
            {% endfor %}
        </table>
    </div>
{% endblock %}
